# Создание API для доступа к серверу

В этом финальном задании вы будете писать аналог приложения TODO-LIST со списком задач. Часть кода уже написана.

Как и в предыдущем уроке, вам понадобится оутер `chi`.

## Что уже есть?

Мы определили структуру `Task`(задача), в которой несколько полей:

```
type Task struct {
    ID          string      `json:"id"`             // ID задачи
    Description string      `json:"description"`    // Заголовок
    Note        string      `json:"note"`           // Описание задачи
    Application []string    `json:"application"`    // Приложения, которыми будете пользоваться
}
```

И создали мапу с двумя записями, чтобы всегда была возможность проверить обработчик:

```
var tasks = map[string]Task{
    "1": {
        ID:          "1",
        Description: "Сделать финальное задание темы REST API",
        Note:        "Если сегодня сделаю, то завтра будет свободный день. Ура!",
        Applications: []string{
            "VS Code",
            "Terminal",
            "git",
        },
    },
    "2": {
        ID:          "2",
        Description: "Протестировать финальное задание с помощью Postmen",
        Note:        "Лучше это делать в процессе разработки, каждый раз, когда запускаешь сервер и проверяешь хендлер",
        Applications: []string{
            "VS Code",
            "Terminal",
            "git",
            "Postman",
        },
    },
}
```

Так же есть основная функция:

```
func main() {
    r := chi.NewRouter()

    // здесь регистрируйте ваши обработчики
    // ...

    if err := http.ListenAndServe(":8080", r); err != nil {
        fmt.Printf("Ошибка при запуске сервера: %s", err.Error())
        return
    }
}
```

Добавлять обработчики и эндпоинты в роутер вам придется самим.

Вам нужно будет создать четыре обработчика для четырех эндпоинтов. Опишем каждый из них.

## Обработчик для получения всех задач

Обработчик должен вернуть все задачи, которые хранятся в мапе.

- Конечная точка `/tasks`.
- Метод `GET`.
- При успешном запросе сервер должен вернуть статус `200 OK`.
- При ошибке сервер должен вернуть статус `500 Internal Server Error`.

## Обработчик для отправки задачи на сервер

Обработчик должен принимать задачу в теле запроса и сохранять ее в мапе.

- Конечная точка `/tasks`.
- Метод `POST`.
- При успешном запросе сервер должен вернуть статус `201 Created`.
- При ошибке сервер должен вернуть статус `400 Bad Request`.

## Обработчик для получения задачи по ID

Обработчик должен вернуть задачу с указанным в запросе пути ID, если такая есть в мапе.

В мапе ключами являются ID задач. Вспомните, как проверить, есть ли ключ в мапе. Если такого ID нет, верните соответствующий статус.

- Конечная точка `/tasks/{id}`.
- Метод `GET`.
- При успешном выполнении запроса сервер должен вернуть статус `200 OK`.
- В случае ошибки или отсутствия задачи в мапе сервер должен вернуть статус `400 Bad Request`.

## Обработчик удаления задачи по ID

Обработчик должен удалить задачу из мапы по её ID. Здесь так же нужно сначала проверить, есть ли задача с таким ID в мапе, если нет вернуть соответствующий статус.

- Конечная точка `/tasks/{id}`.
- Метод `DELETE`.
- При успешном выполнении запроса сервер должен вернуть статус `200 OK`.
- В случае ошибки или отсутствия задачи в мапе сервер должен вернуть статус `400 Bad Request`.

Во всех обработчиках тип контента `Content-Type` — `application/json`.

## Несколько советов для облегчения жизни

- Когда написали обработчик, сразу региструйте его в роутере, запускайте сервер и проверяйте в Postman.
- При проверке обращайте внимание на статусы ответов.
- При проверке обработчика с методом `POST` будьте внимательны, когда пишите тело в формате JSON. Если вернулся «плохой» статус, еще раз проверьте, правильно ли все в теле запроса.
- Когда проверка обработчика с методом `POST` прошла успешно, снова выполните запрос `GET /tasks`, чтобы посмотреть добавилась ли задача в мапу.
- Вспомните как проверять, есть ли ключ в мапе. И если нет, возвращайте статус, который указан в задании.
- После успешной проверки запроса `DELETE /tasks/{id}` снова выполните запрос `GET /tasks`, чтобы посмотреть, удалилась ли задача из мапы.

Чтобы приступить к заданию, пройдите по [ссылке](https://github.com/Yandex-Practicum/go-rest-api-homework) и сделайте Fork на свой аккаунт GitHub, нажав на кнопку `Fork`.

Далее клонируйте репозиторий себе на компьютер, выполнив в терминале команду:

Скопировать кодBASH

```
git clone <чтобы получить ссылку, нажмите на кнопку Code и скопируйте её оттуда>
```

!https://code.s3.yandex.net/go/go1F/33.%D0%9F%D1%80%D0%B0%D0%BA%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0.%D0%9A%D0%BB%D0%BE%D0%BD%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_%D1%80%D0%B5%D0%BF%D0%BE%D0%B7%D0%B8%D1%82%D0%BE%D1%80%D0%B8%D1%8F.png

Теперь можете открывать проект в IDE и выполнять задание.

Когда будете готовы, добавьте все изменения, утвердите их и отправьте на Github:

Скопировать кодBASH

```
git add .
git commit -m "ваш комментарий"
git push
```

После можете отправлять на ревью ссылку на ваш репозиторий.